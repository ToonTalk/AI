
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LLM Prompt Concatenator</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            padding: 10px;
        }
        .container {
            max-width: 600px;
            margin: 0 auto;
        }
        select, textarea, button, input {
            width: 100%;
            margin: 10px 0;
            padding: 8px;
        }
        .responses {
            margin-top: 20px;
        }
        .response-item {
            border: 1px solid #ccc;
            padding: 10px;
            margin-bottom: 10px;
            border-radius: 5px;
        }
        .response-display {
            border: 1px solid #ccc;
            padding: 10px;
            margin-top: 10px;
            border-radius: 5px;
            min-height: 60px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>LLM Prompt Concatenator</h1>
        <select id="llmSelect">
            <option value="geminiNano">Gemini Nano</option>
            <option value="gemini">Gemini Flash</option>
            <option value="cohere">Cohere.ai</option>
            <option value="gpt4">ChatGPT-4o-mini</option>
        </select>

        <input type="password" id="apiKeyInput" placeholder="Enter API key" style="display: none;">
        
        <textarea id="text1" rows="3" placeholder="Enter first part of the prompt"></textarea>
        <textarea id="text2" rows="3" placeholder="Enter second part of the prompt"></textarea>

        <button id="submitBtn">Submit Prompt</button>

        <div id="responseDisplay" class="response-display">Response will also appear here...</div>

        <div class="responses" id="responses"></div>
    </div>

    <script src="api.js"></script>
    <script>
        document.getElementById('llmSelect').addEventListener('change', function() {
            const llmType = this.value;
            const apiKeyInput = document.getElementById('apiKeyInput');
            if (llmType === 'geminiNano') {
                apiKeyInput.style.display = 'none';
            } else {
                apiKeyInput.style.display = 'block';
            }
        });

        async function handleSubmit() {
            const llmType = document.getElementById('llmSelect').value;
            const apiKey = document.getElementById('apiKeyInput').value;
            const text1 = document.getElementById('text1').value;
            const text2 = document.getElementById('text2').value;
            const fullPrompt = text1 + " " + text2;

            const agent = {
                role: 'user', // This can be changed if needed
                llmType: llmType,
                apiKey: apiKey,  // Pass the API key to the agent
                messages: [],
                session: null  // Adding session initialization for geminiNano
            };

            if (llmType === 'geminiNano') {
                // For Gemini Nano, we must create a session
                agent.session = await ai.assistant.create({
                    systemPrompt: `You are a ${agent.role} agent.`
                });
            }

            try {
                const response = await processMessage(agent, fullPrompt);

                // Update the second text area with the latest response
                document.getElementById('text2').value = response;

                // Also update the response display
                document.getElementById('responseDisplay').innerText = response;

                // Record the response in the log
                const responsesDiv = document.getElementById('responses');
                const newResponse = document.createElement('div');
                newResponse.className = 'response-item';
                newResponse.innerHTML = `<strong>${llmType}</strong>: ${response}`;
                responsesDiv.prepend(newResponse);
            } catch (error) {
                console.error("Error processing the prompt:", error);
            }
        }

        document.getElementById('submitBtn').addEventListener('click', handleSubmit);
    </script>
</body>
</html>
