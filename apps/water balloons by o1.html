<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Water Balloon Flower Game</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"> <!-- Ensures proper scaling on mobile devices -->
    <style>
        /* CSS styles */
        body {
            text-align: center;
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
        }

        #game-area {
            position: relative;
            width: 100%;
            max-width: 800px;
            height: 80vh;
            margin: 0 auto;
            background-color: #e0f7fa;
            overflow: hidden;
            border: 2px solid #00796b;
            cursor: crosshair;
            touch-action: none; /* Prevent default touch actions */
        }

        .flower {
            position: absolute;
            bottom: 0;
            font-size: 8vw;
            transition: transform 0.5s, filter 0.5s;
            transform: translateX(-50%) scale(1);
            transform-origin: bottom center; /* Grow upwards */
            background: transparent;
            user-select: none;
        }

        .balloon {
            position: absolute;
            top: 0;
            width: 4vw;
            height: 8vh;
            background-color: red; /* Default color */
            border-radius: 50% 50% 50% 50% / 60% 60% 40% 40%;
            transition: top 0.03s linear;
            transform: translateX(-50%);
            user-select: none;
        }

        .balloon::after {
            content: '';
            position: absolute;
            bottom: -2vh;
            left: 50%;
            width: 0.4vw;
            height: 2vh;
            background-color: black;
            transform: translateX(-50%);
        }
    </style>
</head>
<body>
    <h1>Water Balloon Flower Game</h1>
    <div id="game-area">
        <!-- Flowers and balloons will be dynamically added here -->
    </div>

    <script>
        // JavaScript code
        document.addEventListener('DOMContentLoaded', () => {
            const gameArea = document.getElementById('game-area');

            const flowerEmojis = ['ðŸŒ¼', 'ðŸŒ¸', 'ðŸŒº', 'ðŸŒ»', 'ðŸŒ¹', 'ðŸŒ·'];
            const balloonColors = ['red', 'blue', 'green', 'yellow', 'purple', 'orange'];

            const flowers = [];
            const numFlowers = 5;

            // Create flowers and position them evenly across the game area
            for (let i = 0; i < numFlowers; i++) {
                const flower = document.createElement('div');
                flower.classList.add('flower');
                flower.style.left = ((i + 0.5) * (100 / numFlowers)) + '%';

                // Assign a random flower emoji
                const randomFlower = flowerEmojis[Math.floor(Math.random() * flowerEmojis.length)];
                flower.innerText = randomFlower;

                gameArea.appendChild(flower);
                flowers.push({
                    element: flower,
                    size: 1,
                    colorIntensity: 100
                });
            }

            // Handle balloon drop on click or touch
            const handleInteraction = (event) => {
                event.preventDefault();
                let clientX;

                if (event.type === 'touchstart') {
                    clientX = event.touches[0].clientX;
                } else {
                    clientX = event.clientX;
                }

                const rect = gameArea.getBoundingClientRect();
                const x = clientX - rect.left; // x position within the game area

                const balloon = document.createElement('div');
                balloon.classList.add('balloon');
                balloon.style.left = x + 'px';

                // Assign a random balloon color
                const randomColor = balloonColors[Math.floor(Math.random() * balloonColors.length)];
                balloon.style.backgroundColor = randomColor;

                gameArea.appendChild(balloon);

                // Animate balloon drop
                let topPosition = 0;
                const dropInterval = setInterval(() => {
                    topPosition += gameArea.clientHeight * 0.01; // Adjust speed based on game area height
                    balloon.style.top = topPosition + 'px';

                    // Check for collision with flowers
                    flowers.forEach(flower => {
                        const balloonRect = balloon.getBoundingClientRect();
                        const flowerRect = flower.element.getBoundingClientRect();

                        if (balloonRect.bottom >= flowerRect.top &&
                            balloonRect.left < flowerRect.right &&
                            balloonRect.right > flowerRect.left) {
                            
                            // Balloon hits the flower
                            clearInterval(dropInterval);
                            gameArea.removeChild(balloon);

                            // Increase flower size and color intensity
                            flower.size += 0.2;
                            flower.colorIntensity = Math.min(flower.colorIntensity + 20, 100);
                            flower.element.style.transform = `translateX(-50%) scale(${flower.size})`;
                            flower.element.style.filter = `grayscale(${100 - flower.colorIntensity}%)`;

                        }
                    });

                    // Remove balloon if it reaches the bottom
                    if (topPosition >= gameArea.clientHeight) {
                        clearInterval(dropInterval);
                        gameArea.removeChild(balloon);
                    }

                }, 30);
            };

            gameArea.addEventListener('click', handleInteraction);
            gameArea.addEventListener('touchstart', handleInteraction);

            // Flowers shrink and turn gray over time
            setInterval(() => {
                flowers.forEach(flower => {
                    flower.size = Math.max(0.5, flower.size - 0.005);
                    flower.colorIntensity = Math.max(0, flower.colorIntensity - 0.5);
                    flower.element.style.transform = `translateX(-50%) scale(${flower.size})`;
                    flower.element.style.filter = `grayscale(${100 - flower.colorIntensity}%)`;
                });
            }, 100);
        });
    </script>
</body>
</html>
