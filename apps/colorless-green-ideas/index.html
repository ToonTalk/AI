<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Colorless Green Ideas Sleep Furiously</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.23.5/babel.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tone/14.8.49/Tone.min.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/tailwindcss/2.2.19/tailwind.min.css" rel="stylesheet">
    <style>
        body { margin: 0; overflow: hidden; background-color: #111827; font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif; }
        .video-container {
            position: absolute;
            cursor: move;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.5);
            /* Default, faster transition for subsequent interactions */
            transition: transform 0.3s ease, opacity 0.3s ease;
        }
        .video-container.initial-explosion {
            /* Slower, more elaborate transition for initial "explode" */
            transition: transform 2s cubic-bezier(0.175, 0.885, 0.32, 1.275), 
                        opacity 1.8s ease-out 0.2s;
        }
        .video-container.dragging {
            transition: none !important; 
        }
        .controls-bar { display: flex; justify-content: space-between; padding: 8px; background-color: rgba(0, 0, 0, 0.7); }
        .btn { background: none; border: none; color: white; cursor: pointer; width: 30px; height: 30px; display: flex; align-items: center; justify-content: center; border-radius: 4px; }
        .btn:hover { background-color: rgba(255, 255, 255, 0.1); }
        .video-title { position: absolute; bottom: 40px; left: 0; right: 0; background-color: rgba(0, 0, 0, 0.6); color: white; padding: 8px; font-size: 14px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
        .global-controls { position: fixed; top: 16px; right: 16px; z-index: 1000; display: flex; gap: 8px; }
        .global-btn { display: flex; align-items: center; justify-content: center; background-color: #374151; color: white; border: none; border-radius: 9999px; padding: 1rem; cursor: pointer; transition: background-color 0.2s ease-in-out; }
        .global-btn:hover { background-color: #4B5563; }
        .info-panel { position: fixed; top: 16px; left: 16px; z-index: 1000; background-color: rgba(0, 0, 0, 0.7); color: white; padding: 12px; border-radius: 8px; max-width: 300px; }
        .video-info-modal { position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); background-color: rgba(17, 24, 39, 0.95); border-radius: 8px; padding: 20px; z-index: 2000; width: 500px; max-width: 90vw; color: white; box-shadow: 0 4px 20px rgba(0, 0, 0, 0.6); }
        .modal-backdrop { position: fixed; top: 0; left: 0; right: 0; bottom: 0; background-color: rgba(0, 0, 0, 0.5); z-index: 1999; }
        .modal-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 16px; }
        .modal-content { line-height: 1.6; }
        .modal-close-btn { background: none; border: none; color: white; cursor: pointer; font-size: 24px; }
    </style>
</head>
<body>
    <div id="app"></div>

    <script type="text/babel">
        // Icons
        const PlayIcon = () => ( <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"> <polygon points="5 3 19 12 5 21 5 3"></polygon> </svg> );
        const PauseIcon = () => ( <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"> <rect x="6" y="4" width="4" height="16"></rect> <rect x="14" y="4" width="4" height="16"></rect> </svg> );
        const MaximizeIcon = () => ( <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"> <path d="M8 3H5a2 2 0 0 0-2 2v3m18 0V5a2 2 0 0 0-2-2h-3m0 18h3a2 2 0 0 0 2-2v-3M3 16v3a2 2 0 0 0 2 2h3"></path> </svg> );
        const MinimizeIcon = () => ( <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"> <path d="M8 3v3a2 2 0 0 1-2 2H3m18 0h-3a2 2 0 0 1-2-2V3m0 18v-3a2 2 0 0 1 2-2h3M3 16h3a2 2 0 0 1 2 2v3"></path> </svg> );
        const InfoIcon = () => ( <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"> <circle cx="12" cy="12" r="10"></circle> <line x1="12" y1="16" x2="12" y2="12"></line> <line x1="12" y1="8" x2="12.01" y2="8"></line> </svg> );
        const VolumeOnIcon = () => ( <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"> <polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"></polygon> <path d="M19.07 4.93a10 10 0 0 1 0 14.14M15.54 8.46a5 5 0 0 1 0 7.07"></path> </svg> );
        const VolumeOffIcon = () => ( <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"> <polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"></polygon> <line x1="23" y1="9" x2="17" y2="15"></line> <line x1="17" y1="9" x2="23" y2="15"></line> </svg> );
        const ResetIcon = () => ( <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"> <path d="M3 2v6h6"></path> <path d="M3 13a9 9 0 1 0 3-7.7L3 8"></path> </svg> );

        // DraggableVideo Component
        const DraggableVideo = ({ video, onDrag, onScale, onRotate, bringToFront }) => {
            const [isDragging, setIsDragging] = React.useState(false);
            const [dragOffset, setDragOffset] = React.useState({ x: 0, y: 0 });
            const [isPlaying, setIsPlaying] = React.useState(false);
            const [isExpanded, setIsExpanded] = React.useState(false);
            const [showInfo, setShowInfo] = React.useState(false);
            const [videoError, setVideoError] = React.useState(false);
            const videoRef = React.useRef(null);
            const componentRef = React.useRef(null);
            const [useExplosionTransition, setUseExplosionTransition] = React.useState(true);
            const [animatedProps, setAnimatedProps] = React.useState(() => {
                const initialVideoWidth = 300; 
                const initialVideoHeight = initialVideoWidth * 9 / 16;
                const centerX = typeof window !== 'undefined' ? window.innerWidth / 2 - initialVideoWidth / 2 : video.position.x;
                const centerY = typeof window !== 'undefined' ? window.innerHeight / 2 - initialVideoHeight / 2 : video.position.y;
                return { transform: `translate(${centerX}px, ${centerY}px) scale(0.01) rotate(0deg)`, opacity: 0, hasAnimatedIn: false };
            });

            React.useEffect(() => {
                setUseExplosionTransition(true); 
                const explosionTransformDuration = 2000; 
                const initialAnimationTimer = setTimeout(() => {
                    setAnimatedProps({ transform: `translate(${video.position.x}px, ${video.position.y}px) scale(${video.scale}) rotate(${video.rotation}deg)`, opacity: 1, hasAnimatedIn: true });
                }, 50); 
                const endExplosionTransitionTimer = setTimeout(() => { setUseExplosionTransition(false); }, 50 + explosionTransformDuration); 
                return () => { clearTimeout(initialAnimationTimer); clearTimeout(endExplosionTransitionTimer); };
            }, []); 

            React.useEffect(() => {
                if (animatedProps.hasAnimatedIn && !isDragging) {
                     setAnimatedProps(prevProps => ({ ...prevProps, transform: `translate(${video.position.x}px, ${video.position.y}px) scale(${video.scale}) rotate(${video.rotation}deg)` }));
                }
            }, [video.position.x, video.position.y, video.scale, video.rotation, animatedProps.hasAnimatedIn, isDragging]);

            const handleMouseDown = (e) => { if (videoError) return; bringToFront(video.id); setIsDragging(true); const rect = componentRef.current.getBoundingClientRect(); setDragOffset({ x: e.clientX - rect.left, y: e.clientY - rect.top }); if (componentRef.current) componentRef.current.classList.add('dragging'); };
            const handleMouseMove = React.useCallback((e) => { if (isDragging) { const newX = e.clientX - dragOffset.x; const newY = e.clientY - dragOffset.y; if (componentRef.current) { componentRef.current.style.transform = `translate(${newX}px, ${newY}px) rotate(${video.rotation}deg) scale(${video.scale})`; if(animatedProps.hasAnimatedIn) componentRef.current.style.opacity = '1'; } onDrag(video.id, { x: newX, y: newY }); } }, [isDragging, dragOffset, video.rotation, video.scale, onDrag, video.id, animatedProps.hasAnimatedIn]);
            const handleMouseUp = React.useCallback(() => { if (isDragging) { setIsDragging(false); if (componentRef.current) componentRef.current.classList.remove('dragging'); } }, [isDragging]);
            React.useEffect(() => { if (isDragging) { window.addEventListener('mousemove', handleMouseMove); window.addEventListener('mouseup', handleMouseUp); } return () => { window.removeEventListener('mousemove', handleMouseMove); window.removeEventListener('mouseup', handleMouseUp); }; }, [isDragging, handleMouseMove, handleMouseUp]);
            const togglePlay = (e) => { e.stopPropagation(); if (videoRef.current) { if (isPlaying) videoRef.current.pause(); else videoRef.current.play().catch(err => { console.error(`Error playing video ${video.src}:`, err); setVideoError(true); }); setIsPlaying(!isPlaying); } };
            const handleScale = (e, factor) => { e.stopPropagation(); onScale(video.id, factor); };
            const handleRotate = (e, degrees) => { e.stopPropagation(); onRotate(video.id, degrees); };
            const toggleExpand = (e) => { e.stopPropagation(); setIsExpanded(!isExpanded); bringToFront(video.id); };
            const toggleInfo = (e) => { e.stopPropagation(); setShowInfo(!showInfo); if (!showInfo) bringToFront(video.id); };
            const handleVideoError = (e) => { console.error(`Error loading video: ${video.src}`, e); setVideoError(true); };
            const currentWidth = isExpanded ? '500px' : '300px';
            const containerStyle = { transform: animatedProps.transform, opacity: animatedProps.opacity, zIndex: video.z, width: currentWidth };
            
            return (
                <>
                    <div 
                        ref={componentRef} 
                        className={`video-container ${useExplosionTransition ? 'initial-explosion' : ''} ${isDragging ? 'dragging' : ''}`} 
                        style={containerStyle} 
                        onMouseDown={handleMouseDown}>
                        {videoError ? ( <div className="w-full aspect-video bg-red-900 flex items-center justify-center text-white p-4 text-center"> <div> <p className="font-bold">Video Error</p> <p className="text-sm mt-2">Could not load: {video.src}</p> <p className="text-xs mt-1">(Check file exists & path is correct)</p> </div> </div> ) : ( <video ref={videoRef} src={video.src} width="100%" loop muted={!isPlaying} onEnded={() => setIsPlaying(false)} onError={handleVideoError} preload="metadata" /> )}
                        <div className="video-title">{video.title}</div>
                        <div className="controls-bar">
                            <button className="btn" onClick={togglePlay} disabled={videoError} title={isPlaying ? "Pause" : "Play"}>{isPlaying ? <PauseIcon /> : <PlayIcon />}</button>
                            <div className="flex space-x-1"> <button className="btn" onClick={toggleInfo} title="Info"><InfoIcon /></button> <button className="btn" onClick={(e) => handleRotate(e, -15)} title="Rotate Left">↺</button> <button className="btn" onClick={(e) => handleRotate(e, 15)} title="Rotate Right">↻</button> <button className="btn" onClick={(e) => handleScale(e, 0.8)} title="Zoom Out">-</button> <button className="btn" onClick={(e) => handleScale(e, 1.2)} title="Zoom In">+</button> <button className="btn" onClick={toggleExpand} title={isExpanded ? "Minimize" : "Maximize"}>{isExpanded ? <MinimizeIcon /> : <MaximizeIcon />}</button> </div>
                        </div>
                    </div>
                    {showInfo && ( <> <div className="modal-backdrop" onClick={toggleInfo}></div> <div className="video-info-modal"> <div className="modal-header"> <h2 className="text-xl font-bold">{video.title}</h2> <button className="modal-close-btn" onClick={toggleInfo} title="Close">&times;</button> </div> <div className="modal-content"> <p className="mb-4 text-sm">{video.description}</p> <p className="text-xs text-gray-400">Filename: {video.src}</p> <p className="text-xs text-gray-400">Category: {video.category}</p> <p className="text-xs text-gray-400">ID: {video.id}, Scale: {video.scale.toFixed(2)}, Rotation: {video.rotation}°</p> </div> </div> </> )}
                </>
            );
        };

        // Main App Component
        const App = () => {
            const getInitialVideos = () => {
                const basePositions = [ {x: 100, y: 100}, {x: 300, y: 150}, {x: 500, y: 100}, {x: 200, y: 300}, {x: 400, y: 350}, {x: 600, y: 300}, {x: 150, y: 500}, {x: 350, y: 550}, {x: 550, y: 500}, {x: 700, y: 150}, {x: 850, y: 350}, {x: 700, y: 550} ];
                const getRandomOffset = () => Math.floor(Math.random() * 80) - 40; 
                const allVideosData = [ 
                    // Original Sets
                    { id: 1, src: "veo-direct.mp4", title: "Veo - Direct Prompt", description: "This video was generated by Veo AI when prompted with the famous linguistic example 'Colorless green ideas sleep furiously'. This sentence, created by Noam Chomsky, demonstrates that a grammatically correct sentence can still be semantically nonsensical.", position: { x: 370, y: 50 }, rotation: 0, scale: 1, z: 48, category: "direct"},
                    { id: 2, src: "sora-direct-1.mp4", title: "Sora - Direct Prompt 1", description: "This is the first response from OpenAI's Sora video generation model when prompted with 'Colorless green ideas sleep furiously'. Sora attempts to visualize this grammatically correct but semantically nonsensical phrase through abstract imagery.", rotation: -5, scale: 1, z: 2, category: "direct" },
                    { id: 3, src: "sora-direct-2.mp4", title: "Sora - Direct Prompt 2", description: "This is the second response from OpenAI's Sora video generation model when prompted with 'Colorless green ideas sleep furiously'. It offers an alternative visual interpretation of Chomsky's famous example sentence.", rotation: 5, scale: 1, z: 3, category: "direct"},
                    { id: 4, src: "Veo_Dreamlike_Ideas.mp4", title: "Veo - Dreamlike", description: "This video was generated by Veo AI with the prompt: 'Surreal, shifting dreamscape. Colorless, translucent green geometric shapes (the 'ideas') are tossing and turning violently in an unseen bed (representing 'sleep'). The scene is filled with frantic, silent energy. Use words like 'paradoxical,' 'nonsensical,' 'dreamlike.'", rotation: 0, scale: 1, z: 4, category: "dreamlike"},
                    { id: 5, src: "Sora_Dreamlike-1.mp4", title: "Sora - Dreamlike 1", description: "This is the first response from OpenAI's Sora model with the prompt: 'Surreal, shifting dreamscape. Colorless, translucent green geometric shapes (the 'ideas') are tossing and turning violently in an unseen bed (representing 'sleep'). The scene is filled with frantic, silent energy. Use words like 'paradoxical,' 'nonsensical,' 'dreamlike.'", rotation: -3, scale: 1, z: 5, category: "dreamlike"},
                    { id: 6, src: "Sora_Dreamlike-2.mp4", title: "Sora - Dreamlike 2", description: "This is the second response from OpenAI's Sora model with the prompt: 'Surreal, shifting dreamscape. Colorless, translucent green geometric shapes (the 'ideas') are tossing and turning violently in an unseen bed (representing 'sleep'). The scene is filled with frantic, silent energy. Use words like 'paradoxical,' 'nonsensical,' 'dreamlike.'", rotation: 3, scale: 1, z: 6, category: "dreamlike"},
                    { id: 7, src: "Veo-abstract.mp4", title: "Veo - Abstract", description: "This video was generated by Veo AI with the prompt: 'An abstract animation where the concept of 'green' is presented without color, perhaps as shimmering colorless forms. These forms, representing 'ideas,' are depicted in a restless, agitated state of 'sleep,' moving and vibrating 'furiously.' Emphasize a dreamlike, illogical, and visually paradoxical atmosphere.'", rotation: 2, scale: 1, z: 7, category: "abstract"},
                    { id: 8, src: "Sora-abstract-1.mp4", title: "Sora - Abstract 1", description: "This is the first response from OpenAI's Sora model with the prompt: 'An abstract animation where the concept of 'green' is presented without color, perhaps as shimmering colorless forms. These forms, representing 'ideas,' are depicted in a restless, agitated state of 'sleep,' moving and vibrating 'furiously.' Emphasize a dreamlike, illogical, and visually paradoxical atmosphere.'", rotation: -2, scale: 1, z: 8, category: "abstract"},
                    { id: 9, src: "Sora-abstract-2.mp4", title: "Sora - Abstract 2", description: "This is the second response from OpenAI's Sora model with the prompt: 'An abstract animation where the concept of 'green' is presented without color, perhaps as shimmering colorless forms. These forms, representing 'ideas,' are depicted in a restless, agitated state of 'sleep,' moving and vibrating 'furiously.' Emphasize a dreamlike, illogical, and visually paradoxical atmosphere.'", rotation: 4, scale: 1, z: 9, category: "abstract"},
                    { id: 10, src: "Veo-poem.mp4", title: "Veo - Visual Poem", description: "This video was generated by Veo AI with the prompt: 'A visual poem depicting the impossible: Show the essence of the color green, but rendered in monochrome or greyscale. Abstract representations of 'ideas' (perhaps lightbulbs, thought bubbles, or flowing lines) are shown in a state of agitated, furious slumber. The overall mood should be unsettling yet mesmerizing.'", rotation: -1, scale: 1, z: 10, category: "poem"},
                    { id: 11, src: "Sora-poem-1.mp4", title: "Sora - Visual Poem 1", description: "This is the first response from OpenAI's Sora model with the prompt: 'A visual poem depicting the impossible: Show the essence of the color green, but rendered in monochrome or greyscale. Abstract representations of 'ideas' (perhaps lightbulbs, thought bubbles, or flowing lines) are shown in a state of agitated, furious slumber. The overall mood should be unsettling yet mesmerizing.'", rotation: 6, scale: 1, z: 11, category: "poem"},
                    { id: 12, src: "Sora-poem-2.mp4", title: "Sora - Visual Poem 2", description: "This is the second response from OpenAI's Sora model with the prompt: 'A visual poem depicting the impossible: Show the essence of the color green, but rendered in monochrome or greyscale. Abstract representations of 'ideas' (perhaps lightbulbs, thought bubbles, or flowing lines) are shown in a state of agitated, furious slumber. The overall mood should be unsettling yet mesmerizing.'", rotation: -4, scale: 1, z: 12, category: "poem"},
                    { id: 13, src: "veo-split-screen.mp4", title: "Veo - Split Screen", description: "This video was generated by Veo AI with the prompt: 'A split screen. On one side, depict the word 'GREEN' in bold, vibrant green letters. On the other side, show abstract, colorless (greyscale or translucent) organic shapes that pulse and twitch erratically, representing 'ideas sleeping furiously.' The 'sleep' could be conveyed by a dark, subdued background, and the 'furiously' by the rapid, agitated movements.'", rotation: 1, scale: 1, z: 13, category: "split"},
                    { id: 14, src: "sora-split-screen-1.mp4", title: "Sora - Split Screen 1", description: "This is the first response from OpenAI's Sora model with the prompt: 'A split screen. On one side, depict the word 'GREEN' in bold, vibrant green letters. On the other side, show abstract, colorless (greyscale or translucent) organic shapes that pulse and twitch erratically, representing 'ideas sleeping furiously.' The 'sleep' could be conveyed by a dark, subdued background, and the 'furiously' by the rapid, agitated movements.'", rotation: -6, scale: 1, z: 14, category: "split"},
                    { id: 15, src: "sora-split-screen-2.mp4", title: "Sora - Split Screen 2", description: "This is the second response from OpenAI's Sora model with the prompt: 'A split screen. On one side, depict the word 'GREEN' in bold, vibrant green letters. On the other side, show abstract, colorless (greyscale or translucent) organic shapes that pulse and twitch erratically, representing 'ideas sleeping furiously.' The 'sleep' could be conveyed by a dark, subdued background, and the 'furiously' by the rapid, agitated movements.'", rotation: 2, scale: 1, z: 15, category: "split"},
                    { id: 16, src: "Veo_brain.mp4", title: "Veo - Brain Prompt", description: "Visualize a brain, glowing with a faint, colorless green light. Inside, abstract thought-forms (perhaps like swirling smoke or energy patterns) are shown in a highly agitated, rapid-eye-movement-like sleep state. The fury should be evident in the speed and intensity of their movement, despite the 'sleep' context.", rotation: -2, scale: 1, z: 16, category: "brain"},
                    { id: 17, src: "Sora-brain-1.mp4", title: "Sora - Brain Prompt 1", description: "Visualize a brain, glowing with a faint, colorless green light. Inside, abstract thought-forms (perhaps like swirling smoke or energy patterns) are shown in a highly agitated, rapid-eye-movement-like sleep state. The fury should be evident in the speed and intensity of their movement, despite the 'sleep' context.", rotation: 3, scale: 1, z: 17, category: "brain"},
                    { id: 18, src: "Sora-brain-2.mp4", title: "Sora - Brain Prompt 2", description: "Visualize a brain, glowing with a faint, colorless green light. Inside, abstract thought-forms (perhaps like swirling smoke or energy patterns) are shown in a highly agitated, rapid-eye-movement-like sleep state. The fury should be evident in the speed and intensity of their movement, despite the 'sleep' context.", rotation: -5, scale: 1, z: 18, category: "brain"},
                    { id: 19, src: "Sora-brain-3.mp4", title: "Sora - Brain Prompt 3", description: "Visualize a brain, glowing with a faint, colorless green light. Inside, abstract thought-forms (perhaps like swirling smoke or energy patterns) are shown in a highly agitated, rapid-eye-movement-like sleep state. The fury should be evident in the speed and intensity of their movement, despite the 'sleep' context.", rotation: 1, scale: 1, z: 19, category: "brain"},
                    { id: 20, src: "Sora-brain-4.mp4", title: "Sora - Brain Prompt 4", description: "Visualize a brain, glowing with a faint, colorless green light. Inside, abstract thought-forms (perhaps like swirling smoke or energy patterns) are shown in a highly agitated, rapid-eye-movement-like sleep state. The fury should be evident in the speed and intensity of their movement, despite the 'sleep' context.", rotation: -3, scale: 1, z: 20, category: "brain"},
                    { id: 21, src: "Veo-swatch.mp4", title: "Veo - Swatch Prompt", description: "A sequence starting with a vibrant green color swatch. This swatch then loses its color, becoming greyscale or transparent, while morphing into abstract representations of 'ideas' (e.g., interconnected neurons, flowing script). These colorless ideas then begin to vibrate and shake intensely, as if in a furious sleep. Cinematic, high contrast.", rotation: 4, scale: 1, z: 21, category: "swatch"},
                    { id: 22, src: "Sora-swatch-1.mp4", title: "Sora - Swatch Prompt 1", description: "A sequence starting with a vibrant green color swatch. This swatch then loses its color, becoming greyscale or transparent, while morphing into abstract representations of 'ideas' (e.g., interconnected neurons, flowing script). These colorless ideas then begin to vibrate and shake intensely, as if in a furious sleep. Cinematic, high contrast.", rotation: -1, scale: 1, z: 22, category: "swatch"},
                    { id: 23, src: "Sora-swatch-2.mp4", title: "Sora - Swatch Prompt 2", description: "A sequence starting with a vibrant green color swatch. This swatch then loses its color, becoming greyscale or transparent, while morphing into abstract representations of 'ideas' (e.g., interconnected neurons, flowing script). These colorless ideas then begin to vibrate and shake intensely, as if in a furious sleep. Cinematic, high contrast.", rotation: 5, scale: 1, z: 23, category: "swatch"},
                    { id: 24, src: "Veo-figures.mp4", title: "Veo - Figures Prompt", description: "Pale green, almost translucent figures representing 'ideas' are thrashing about in their sleep. The scene is desaturated, emphasizing the 'colorless' aspect of the green. The 'furious' nature of their sleep should be the main focus, with exaggerated movements.", rotation: 0, scale: 1, z: 24, category: "figures"},
                    { id: 25, src: "Sora-figures-1.mp4", title: "Sora - Figures Prompt 1", description: "Pale green, almost translucent figures representing 'ideas' are thrashing about in their sleep. The scene is desaturated, emphasizing the 'colorless' aspect of the green. The 'furious' nature of their sleep should be the main focus, with exaggerated movements.", rotation: -5, scale: 1, z: 25, category: "figures"},
                    { id: 26, src: "Sora-figures-2.mp4", title: "Sora - Figures Prompt 2", description: "Pale green, almost translucent figures representing 'ideas' are thrashing about in their sleep. The scene is desaturated, emphasizing the 'colorless' aspect of the green. The 'furious' nature of their sleep should be the main focus, with exaggerated movements.", rotation: 3, scale: 1, z: 26, category: "figures"},
                    { id: 27, src: "Veo-field.mp4", title: "Veo - Field Prompt", description: "A field of pale green, ghostly plants (the 'ideas') that are tossing and turning violently as if in a storm, under a dark, dreamlike sky. The green is muted and almost devoid of color. The 'sleep' is implied by the closed state of any 'flowers' or 'leaves,' while 'furiously' is shown by their wild movement.", rotation: -2, scale: 1, z: 27, category: "field"},
                    { id: 28, src: "Sora-field-1.mp4", title: "Sora - Field Prompt 1", description: "A field of pale green, ghostly plants (the 'ideas') that are tossing and turning violently as if in a storm, under a dark, dreamlike sky. The green is muted and almost devoid of color. The 'sleep' is implied by the closed state of any 'flowers' or 'leaves,' while 'furiously' is shown by their wild movement.", rotation: 2, scale: 1, z: 28, category: "field"},
                    { id: 29, src: "Sora-field-2.mp4", title: "Sora - Field Prompt 2", description: "A field of pale green, ghostly plants (the 'ideas') that are tossing and turning violently as if in a storm, under a dark, dreamlike sky. The green is muted and almost devoid of color. The 'sleep' is implied by the closed state of any 'flowers' or 'leaves,' while 'furiously' is shown by their wild movement.", rotation: -4, scale: 1, z: 29, category: "field"},
                    { id: 30, src: "Veo-claymation.mp4", title: "Veo - Claymation Prompt", description: "Hand-sculpted claymation scene: lumpy, moss-green brain-shaped creatures (‘ideas’) doze inside a child’s shoebox diorama, yet their eyelids flutter in rapid, angry stop-motion bursts—overhead desk-lamp lighting, 12 fps, tactile imperfections, 1970s Rankin/Bass style.", rotation: 0, scale: 1, z: 30, category: "claymation"},
                    { id: 31, src: "Sora-claymation-1.mp4", title: "Sora - Claymation Prompt 1", description: "Hand-sculpted claymation scene: lumpy, moss-green brain-shaped creatures (‘ideas’) doze inside a child’s shoebox diorama, yet their eyelids flutter in rapid, angry stop-motion bursts—overhead desk-lamp lighting, 12 fps, tactile imperfections, 1970s Rankin/Bass style.", rotation: 5, scale: 1, z: 31, category: "claymation"},
                    { id: 32, src: "Sora-claymation-2.mp4", title: "Sora - Claymation Prompt 2", description: "Hand-sculpted claymation scene: lumpy, moss-green brain-shaped creatures (‘ideas’) doze inside a child’s shoebox diorama, yet their eyelids flutter in rapid, angry stop-motion bursts—overhead desk-lamp lighting, 12 fps, tactile imperfections, 1970s Rankin/Bass style.", rotation: -5, scale: 1, z: 32, category: "claymation"},
                    { id: 33, src: "Veo-moonlit.mp4", title: "Veo - Moonlit Bubbles", description: "In a moonlit, dream-like void, glowing emerald-green thought-bubbles (‘ideas’) lie curled together as if asleep, yet their surfaces ripple and spasm with furious bursts of light—slow dolly-in, soft cinematic depth-of-field, ultra-wide 14 mm lens, 8-second loop, 4K, volumetric fog, high-contrast, surrealist digital art.", rotation: 0, scale: 1, z: 33, category: "moonlit"},
                    { id: 34, src: "Sora-moonlit-1.mp4", title: "Sora - Moonlit Bubbles 1", description: "In a moonlit, dream-like void, glowing emerald-green thought-bubbles (‘ideas’) lie curled together as if asleep, yet their surfaces ripple and spasm with furious bursts of light—slow dolly-in, soft cinematic depth-of-field, ultra-wide 14 mm lens, 8-second loop, 4K, volumetric fog, high-contrast, surrealist digital art.", rotation: -2, scale: 1, z: 34, category: "moonlit"},
                    { id: 35, src: "Sora-moonlit-2.mp4", title: "Sora - Moonlit Bubbles 2", description: "In a moonlit, dream-like void, glowing emerald-green thought-bubbles (‘ideas’) lie curled together as if asleep, yet their surfaces ripple and spasm with furious bursts of light—slow dolly-in, soft cinematic depth-of-field, ultra-wide 14 mm lens, 8-second loop, 4K, volumetric fog, high-contrast, surrealist digital art.", rotation: 2, scale: 1, z: 35, category: "moonlit"},
                    { id: 36, src: "Veo-neon.mp4", title: "Veo - Neon Cybercity", description: "Neon-wireframe cyber-city at night rendered in 1980s vector graphics; torrents of glowing lime-green code-shards (‘ideas’) pile up like sleeping bodies, then violently jitter with glitchy pixel explosions—slow truck shot, CRT scanlines, synthwave color palette, 6-second loop.", rotation: 1, scale: 1, z: 36, category: "neon"},
                    { id: 37, src: "Sora-neon-1.mp4", title: "Sora - Neon Cybercity 1", description: "Neon-wireframe cyber-city at night rendered in 1980s vector graphics; torrents of glowing lime-green code-shards (‘ideas’) pile up like sleeping bodies, then violently jitter with glitchy pixel explosions—slow truck shot, CRT scanlines, synthwave color palette, 6-second loop.", rotation: -3, scale: 1, z: 37, category: "neon"},
                    { id: 38, src: "Sora-neon-2.mp4", title: "Sora - Neon Cybercity 2", description: "Neon-wireframe cyber-city at night rendered in 1980s vector graphics; torrents of glowing lime-green code-shards (‘ideas’) pile up like sleeping bodies, then violently jitter with glitchy pixel explosions—slow truck shot, CRT scanlines, synthwave color palette, 6-second loop.", rotation: 3, scale: 1, z: 38, category: "neon"},
                    { id: 39, src: "Veo-deep-sea.mp4", title: "Veo - Deep Sea Plankton", description: "Deep-sea documentary footage in hyper-real 8K: bioluminescent emerald plankton (‘ideas’) settle onto the ocean floor as if slumbering, but sudden furious bioluminescent pulses make the sand swirl—macro lens, natural current movement, David Attenborough narration tone, subdued score.", rotation: 0, scale: 1, z: 39, category: "deepsea"},
                    { id: 40, src: "Sora-deep-sea-1.mp4", title: "Sora - Deep Sea Plankton 1", description: "Deep-sea documentary footage in hyper-real 8K: bioluminescent emerald plankton (‘ideas’) settle onto the ocean floor as if slumbering, but sudden furious bioluminescent pulses make the sand swirl—macro lens, natural current movement, David Attenborough narration tone, subdued score.", rotation: -1, scale: 1, z: 40, category: "deepsea"},
                    { id: 41, src: "Sora-deep-sea-2.mp4", title: "Sora - Deep Sea Plankton 2", description: "Deep-sea documentary footage in hyper-real 8K: bioluminescent emerald plankton (‘ideas’) settle onto the ocean floor as if slumbering, but sudden furious bioluminescent pulses make the sand swirl—macro lens, natural current movement, David Attenborough narration tone, subdued score.", rotation: 1, scale: 1, z: 41, category: "deepsea"},
                    { id: 42, src: "Veo-cel-animation.mp4", title: "Veo - Cel Animation Lightbulbs", description: "Golden-age hand-painted cel animation à la Fleischer Studios: anthropomorphic green lightbulbs nap on fluffy clouds, then snore out lightning-bolt z’s that whip around like furious whips—orthographic side-scroll, film-grain overlay, jaunty 1930s jazz soundtrack.", rotation: 2, scale: 1, z: 42, category: "celanimation"},
                    { id: 43, src: "Sora-cel-animation-1.mp4", title: "Sora - Cel Animation Lightbulbs 1", description: "Golden-age hand-painted cel animation à la Fleischer Studios: anthropomorphic green lightbulbs nap on fluffy clouds, then snore out lightning-bolt z’s that whip around like furious whips—orthographic side-scroll, film-grain overlay, jaunty 1930s jazz soundtrack.", rotation: -4, scale: 1, z: 43, category: "celanimation"},
                    { id: 44, src: "Sora-cel-animation-2.mp4", title: "Sora - Cel Animation Lightbulbs 2", description: "Golden-age hand-painted cel animation à la Fleischer Studios: anthropomorphic green lightbulbs nap on fluffy clouds, then snore out lightning-bolt z’s that whip around like furious whips—orthographic side-scroll, film-grain overlay, jaunty 1930s jazz soundtrack.", rotation: 4, scale: 1, z: 44, category: "celanimation"},
                    { id: 45, src: "Veo-minimalist.mp4", title: "Veo - Minimalist Square", description: "Minimalist Bauhaus motion-graphic: a single flat Kelly-green square labeled ‘IDEA’ rotates slowly on a white field, abruptly accelerating into a frenetic blur before collapsing into static sleep—fixed camera, 9-second cycle, hard cuts, vintage projector hum, grayscale typography accents.", rotation: 0, scale: 1, z: 45, category: "minimalist"},
                    { id: 46, src: "Sora-minimalist-1.mp4", title: "Sora - Minimalist Square 1", description: "Minimalist Bauhaus motion-graphic: a single flat Kelly-green square labeled ‘IDEA’ rotates slowly on a white field, abruptly accelerating into a frenetic blur before collapsing into static sleep—fixed camera, 9-second cycle, hard cuts, vintage projector hum, grayscale typography accents.", rotation: -5, scale: 1, z: 46, category: "minimalist"},
                    { id: 47, src: "Sora-minimalist-2.mp4", title: "Sora - Minimalist Square 2", description: "Minimalist Bauhaus motion-graphic: a single flat Kelly-green square labeled ‘IDEA’ rotates slowly on a white field, abruptly accelerating into a frenetic blur before collapsing into static sleep—fixed camera, 9-second cycle, hard cuts, vintage projector hum, grayscale typography accents.", rotation: 5, scale: 1, z: 47, category: "minimalist"}
                ];

                return allVideosData.map((video, index) => {
                    if (video.id === 1) return video; 
                    const base = basePositions[index % basePositions.length];
                    const finalX = Math.max(50, Math.min(base.x + getRandomOffset(), (typeof window !== 'undefined' ? window.innerWidth - 350 : 900)));
                    const finalY = Math.max(50, Math.min(base.y + getRandomOffset(), (typeof window !== 'undefined' ? window.innerHeight - 250 : 600)));
                    return { 
                        ...video, 
                        position: { x: finalX, y: finalY },
                        z: video.z || (allVideosData.length - index) 
                    };
                });
            };

            const [videos, setVideos] = React.useState(getInitialVideos());
            const [soundEnabled, setSoundEnabled] = React.useState(false);
            const synthRef = React.useRef(null); 
            const loopRef = React.useRef(null);   
            const [activeFilter, setActiveFilter] = React.useState('all');
            const [resetNonce, setResetNonce] = React.useState(0);
            const [showAboutModal, setShowAboutModal] = React.useState(false);

            const toggleAboutModal = () => setShowAboutModal(!showAboutModal);
            
            React.useEffect(() => {
                if (soundEnabled) {
                    try {
                        if (synthRef.current && !synthRef.current.disposed) synthRef.current.dispose();
                        if (loopRef.current) loopRef.current.dispose();

                        synthRef.current = new Tone.PolySynth().toDestination();
                        const notes = ['C2', 'F#2', 'D#3', 'G3', 'B3', 'C4', 'F#4'];
                        loopRef.current = new Tone.Loop((time) => {
                            if (synthRef.current && !synthRef.current.disposed) {
                                const note = notes[Math.floor(Math.random() * notes.length)];
                                synthRef.current.triggerAttackRelease(note, '4n', time, 0.1);
                            }
                        }, '8n').start(0);

                        if (Tone.Transport.state !== "started") Tone.Transport.start();
                    } catch (error) {
                        console.error("Audio initialization error:", error);
                        if (loopRef.current) { loopRef.current.dispose(); loopRef.current = null; }
                        if (synthRef.current && !synthRef.current.disposed) { synthRef.current.dispose(); synthRef.current = null; }
                        if (Tone.Transport.state === "started") { Tone.Transport.stop(); Tone.Transport.cancel(); }
                        setSoundEnabled(false); 
                    }
                } else {
                    if (loopRef.current) { loopRef.current.stop(0); loopRef.current.dispose(); loopRef.current = null; }
                    if (synthRef.current && !synthRef.current.disposed) { synthRef.current.releaseAll(); synthRef.current.dispose(); synthRef.current = null; }
                    if (Tone.Transport.state === "started") { Tone.Transport.stop(); Tone.Transport.cancel(); }
                }
                return () => {
                    if (loopRef.current) { loopRef.current.stop(0); loopRef.current.dispose(); loopRef.current = null; }
                    if (synthRef.current && !synthRef.current.disposed) { synthRef.current.releaseAll(); synthRef.current.dispose(); synthRef.current = null; }
                };
            }, [soundEnabled]); 
            
            const toggleSound = () => {
                if (!soundEnabled) { 
                    Tone.start().then(() => Tone.context.resume() ).then(() => {
                        setSoundEnabled(true);
                    }).catch(error => {
                        console.error("Error starting Tone.js audio context:", error);
                    });
                } else { 
                    setSoundEnabled(false);
                }
            };
            
            const resetPositions = () => { setVideos(getInitialVideos()); setResetNonce(prev => prev + 1); };
            const filterVideos = (category) => setActiveFilter(category);
            const handleDrag = (id, newPosition) => setVideos(prev => prev.map(v => v.id === id ? { ...v, position: newPosition } : v));
            const handleScale = (id, factor) => {
                setVideos(prev => prev.map(v => v.id === id ? { ...v, scale: Math.max(0.1, v.scale * factor) } : v));
                if (soundEnabled && synthRef.current && !synthRef.current.disposed) { 
                    synthRef.current.triggerAttackRelease(factor > 1 ? 'G4' : 'C3', '16n', Tone.now(), 0.2);
                }
            };
            const handleRotate = (id, degrees) => {
                setVideos(prev => prev.map(v => v.id === id ? { ...v, rotation: (v.rotation + degrees) % 360 } : v));
                if (soundEnabled && synthRef.current && !synthRef.current.disposed) { 
                    synthRef.current.triggerAttackRelease(degrees > 0 ? 'E4' : 'A3', '16n', Tone.now(), 0.1);
                }
            };
            const bringToFront = (id) => {
                setVideos(prev => {
                    if (prev.length === 0) return prev;
                    const maxZ = Math.max(...prev.map(v_ => v_.z), 0);
                    return prev.map(v => v.id === id ? { ...v, z: maxZ + 1 } : v);
                });
            };
            
            return (
                 <div className="min-h-screen bg-gray-900" style={{ width: '100vw', height: '100vh'}}> 
                    <div className="info-panel">
                        <h1 className="text-xl font-bold mb-2">Colorless Green Ideas Sleep Furiously</h1>
                        <p className="text-sm mb-2">An interactive gallery of AI interpretations.</p>
                        <div className="flex flex-wrap gap-2 mt-3">
                            <button className={`text-xs px-2 py-1 rounded ${activeFilter === 'all' ? 'bg-blue-600 hover:bg-blue-500' : 'bg-gray-700 hover:bg-gray-600'}`} onClick={() => filterVideos('all')}>All Videos</button>
                            <button className={`text-xs px-2 py-1 rounded ${activeFilter === 'direct' ? 'bg-blue-600 hover:bg-blue-500' : 'bg-gray-700 hover:bg-gray-600'}`} onClick={() => filterVideos('direct')}>Direct Prompt</button>
                            <button className={`text-xs px-2 py-1 rounded ${activeFilter === 'dreamlike' ? 'bg-blue-600 hover:bg-blue-500' : 'bg-gray-700 hover:bg-gray-600'}`} onClick={() => filterVideos('dreamlike')}>Dreamlike</button>
                            <button className={`text-xs px-2 py-1 rounded ${activeFilter === 'abstract' ? 'bg-blue-600 hover:bg-blue-500' : 'bg-gray-700 hover:bg-gray-600'}`} onClick={() => filterVideos('abstract')}>Abstract</button>
                            <button className={`text-xs px-2 py-1 rounded ${activeFilter === 'poem' ? 'bg-blue-600 hover:bg-blue-500' : 'bg-gray-700 hover:bg-gray-600'}`} onClick={() => filterVideos('poem')}>Visual Poem</button>
                            <button className={`text-xs px-2 py-1 rounded ${activeFilter === 'split' ? 'bg-blue-600 hover:bg-blue-500' : 'bg-gray-700 hover:bg-gray-600'}`} onClick={() => filterVideos('split')}>Split Screen</button>
                            <button className={`text-xs px-2 py-1 rounded ${activeFilter === 'brain' ? 'bg-blue-600 hover:bg-blue-500' : 'bg-gray-700 hover:bg-gray-600'}`} onClick={() => filterVideos('brain')}>Brain</button>
                            <button className={`text-xs px-2 py-1 rounded ${activeFilter === 'swatch' ? 'bg-blue-600 hover:bg-blue-500' : 'bg-gray-700 hover:bg-gray-600'}`} onClick={() => filterVideos('swatch')}>Swatch</button>
                            <button className={`text-xs px-2 py-1 rounded ${activeFilter === 'figures' ? 'bg-blue-600 hover:bg-blue-500' : 'bg-gray-700 hover:bg-gray-600'}`} onClick={() => filterVideos('figures')}>Figures</button>
                            <button className={`text-xs px-2 py-1 rounded ${activeFilter === 'field' ? 'bg-blue-600 hover:bg-blue-500' : 'bg-gray-700 hover:bg-gray-600'}`} onClick={() => filterVideos('field')}>Field</button>
                            <button className={`text-xs px-2 py-1 rounded ${activeFilter === 'claymation' ? 'bg-blue-600 hover:bg-blue-500' : 'bg-gray-700 hover:bg-gray-600'}`} onClick={() => filterVideos('claymation')}>Claymation</button>
                            <button className={`text-xs px-2 py-1 rounded ${activeFilter === 'moonlit' ? 'bg-blue-600 hover:bg-blue-500' : 'bg-gray-700 hover:bg-gray-600'}`} onClick={() => filterVideos('moonlit')}>Moonlit</button>
                            <button className={`text-xs px-2 py-1 rounded ${activeFilter === 'neon' ? 'bg-blue-600 hover:bg-blue-500' : 'bg-gray-700 hover:bg-gray-600'}`} onClick={() => filterVideos('neon')}>Neon</button>
                            <button className={`text-xs px-2 py-1 rounded ${activeFilter === 'deepsea' ? 'bg-blue-600 hover:bg-blue-500' : 'bg-gray-700 hover:bg-gray-600'}`} onClick={() => filterVideos('deepsea')}>Deep Sea</button>
                            <button className={`text-xs px-2 py-1 rounded ${activeFilter === 'celanimation' ? 'bg-blue-600 hover:bg-blue-500' : 'bg-gray-700 hover:bg-gray-600'}`} onClick={() => filterVideos('celanimation')}>Cel Animation</button>
                            <button className={`text-xs px-2 py-1 rounded ${activeFilter === 'minimalist' ? 'bg-blue-600 hover:bg-blue-500' : 'bg-gray-700 hover:bg-gray-600'}`} onClick={() => filterVideos('minimalist')}>Minimalist</button>
                        </div>
                        <button 
                            className="text-sm font-medium px-3 py-2 mt-4 w-full rounded bg-indigo-600 hover:bg-indigo-500 text-white transition-colors duration-150"
                            onClick={toggleAboutModal}
                        >
                            About this App
                        </button>
                    </div>
                    <div className="global-controls">
                        <button className="global-btn" onClick={resetPositions} title="Reset All Videos"><ResetIcon /></button>
                        <button className="global-btn" onClick={toggleSound} title={soundEnabled ? "Mute Ambient Sound" : "Play Ambient Sound"}>{soundEnabled ? <VolumeOnIcon /> : <VolumeOffIcon />}</button>
                    </div>
                    {videos
                        .filter(video => activeFilter === 'all' || video.category === activeFilter)
                        .map(video => (
                            <DraggableVideo 
                                key={`${video.id}-${resetNonce}`} 
                                video={video}
                                onDrag={handleDrag}
                                onScale={handleScale}
                                onRotate={handleRotate}
                                bringToFront={bringToFront}
                            />
                        ))
                    }
                    {showAboutModal && ( <> <div className="modal-backdrop" onClick={toggleAboutModal}></div> <div className="video-info-modal"> <div className="modal-header"> <h2 className="text-xl font-bold">About This Application</h2> <button className="modal-close-btn" onClick={toggleAboutModal} title="Close">&times;</button> </div> <div className="modal-content"> <p className="mb-4 text-sm"> A detailed description of how the videos and the app were made can be found at the following link: </p> <a href="https://docs.google.com/document/d/1Rmjf6qLqVlJpekaNcCFslwgQALI8e10gxq9VjKQdtWA/edit?usp=sharing" target="_blank" rel="noopener noreferrer" className="text-blue-400 hover:text-blue-300 underline break-all"> View Document </a> <p className="mt-4 text-xs text-gray-400"> This interactive gallery showcases AI-generated video interpretations of Noam Chomsky's sentence, "Colorless green ideas sleep furiously." </p> </div> </div> </> )}
                </div>
            );
        };
        ReactDOM.render(<App />, document.getElementById('app'));
    </script>
</body>
</html>